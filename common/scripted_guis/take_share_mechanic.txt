take_share_scripted_gui = {
	scope = country
	saved_scopes = {
		invested_state
    }

	is_shown = {
		always = yes	
	}
	
	is_valid = {
		always = yes
	}

	effect = {
		scope:invested_state = {
			set_variable = {
				name = take_share_target_state
				value = 0
			}
			owner = {
				trigger_event = { id = fi_share_taking_executer.1 }
			}
		}
	}
}
buy_share_state_scripted_gui = {
	scope = country
	saved_scopes = {
		invested_state
		investor_country
	}

	is_shown = {
		always = yes	
	}
	
	is_valid = {
		scope:invested_state = {
			NOT = { has_variable = buy_share_counter }
		}
	}

	effect = {
		scope:investor_country = {
			set_variable = {
				name = buy_share_country
				value = 0
			}
		}
		scope:invested_state = {
			set_variable = buy_share_target_state
			set_variable = {
				name = buy_share_counter
				value = 1
				months = 1
			}
			
			every_scope_building = {
				if = {
					limit = { is_building_type = building_coal_mine }
					state = { 
						fi_buy_share_effect2 = {
							BUILDING = building_coal_mine
						}
					}
				}
				else_if = {
				        limit = { is_building_type = building_iron_mine }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_iron_mine
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_lead_mine }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_lead_mine
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_sulfur_mine }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_sulfur_mine
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_gold_mine }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_gold_mine
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_logging_camp }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_logging_camp
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_fishing_wharf }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_fishing_wharf
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_whaling_station }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_whaling_station
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_rubber_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_rubber_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_oil_rig }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_oil_rig
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_railway }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_railway
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_coffee_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_coffee_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_cotton_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_cotton_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_dye_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_dye_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_opium_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_opium_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_tea_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_tea_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_tobacco_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_tobacco_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_sugar_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_sugar_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_banana_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_banana_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_silk_plantation }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_silk_plantation
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_rye_farm }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_rye_farm
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_wheat_farm }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_wheat_farm
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_rice_farm }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_rice_farm
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_maize_farm }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_maize_farm
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_millet_farm }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_millet_farm
				                }
				        }
				}
				else_if = {
				        limit = { is_building_type = building_livestock_ranch }
				        state = { 
				                fi_buy_share_effect2 = {
				                        BUILDING = building_livestock_ranch
				                }
				        }
				}
				else_if = {
                                        limit = { is_building_type = building_food_industry }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_food_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_textile_mills }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_textile_mills
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_furniture_manufacturies }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_furniture_manufacturies
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_glassworks }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_glassworks
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_tooling_workshops }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_tooling_workshops
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_paper_mills }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_paper_mills
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_chemical_plants }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_chemical_plants
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_synthetics_plants }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_synthetics_plants
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_steel_mills }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_steel_mills
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_motor_industry }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_motor_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_shipyards }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_shipyards
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_war_machine_industry }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_war_machine_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_electrics_industry }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_electrics_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_arms_industry }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_arms_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_munition_plants }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_munition_plants
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_arts_academy }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_arts_academy
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_power_plant }
                                        state = { 
                                                fi_buy_share_effect2 = {
                                                        BUILDING = building_power_plant
                                                }
                                        }
                                }	
			
			}
		}
	}
}

buy_share_scripted_gui = {
	scope = country
	saved_scopes = {
		invested_building
		investor_country
    }

	is_shown = {
		always = no	
	}
	
	is_valid = {
		exists = scope:invested_building
		scope:invested_building = {
			OR = {
				owner = {
					check_investable = yes
				}
				scope:invested_building = {
					owner = scope:investor_country
				}
			}
			state = {
				NOT = { has_variable = buy_share_counter }
			}
		}
		OR = {
			scope:investor_country = {
				market_capital = { owner = scope:investor_country }
			}
			scope:invested_building = {
				owner = scope:investor_country
			}
		}
	}

	effect = {
		scope:invested_building = {
			if = {
				limit = { is_building_type = building_coal_mine }
				state = { 
					fi_buy_share_effect = {
						BUILDING = building_coal_mine
					}
				}
			}
			else_if = {
			        limit = { is_building_type = building_iron_mine }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_iron_mine
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_lead_mine }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_lead_mine
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_sulfur_mine }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_sulfur_mine
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_gold_mine }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_gold_mine
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_logging_camp }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_logging_camp
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_fishing_wharf }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_fishing_wharf
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_whaling_station }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_whaling_station
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_rubber_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_rubber_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_oil_rig }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_oil_rig
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_railway }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_railway
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_coffee_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_coffee_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_cotton_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_cotton_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_dye_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_dye_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_opium_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_opium_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_tea_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_tea_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_tobacco_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_tobacco_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_sugar_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_sugar_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_banana_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_banana_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_silk_plantation }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_silk_plantation
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_rye_farm }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_rye_farm
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_wheat_farm }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_wheat_farm
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_rice_farm }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_rice_farm
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_maize_farm }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_maize_farm
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_millet_farm }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_millet_farm
			                }
			        }
			}
			else_if = {
			        limit = { is_building_type = building_livestock_ranch }
			        state = { 
			                fi_buy_share_effect = {
			                        BUILDING = building_livestock_ranch
			                }
			        }
			}
			else_if = {
                                        limit = { is_building_type = building_food_industry }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_food_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_textile_mills }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_textile_mills
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_furniture_manufacturies }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_furniture_manufacturies
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_glassworks }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_glassworks
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_tooling_workshops }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_tooling_workshops
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_paper_mills }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_paper_mills
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_chemical_plants }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_chemical_plants
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_synthetics_plants }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_synthetics_plants
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_steel_mills }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_steel_mills
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_motor_industry }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_motor_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_shipyards }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_shipyards
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_war_machine_industry }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_war_machine_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_electrics_industry }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_electrics_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_arms_industry }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_arms_industry
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_munition_plants }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_munition_plants
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_arts_academy }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_arts_academy
                                                }
                                        }
                                }
else_if = {
                                        limit = { is_building_type = building_power_plant }
                                        state = { 
                                                fi_buy_share_effect = {
                                                        BUILDING = building_power_plant
                                                }
                                        }
                                }

		}
	}
}
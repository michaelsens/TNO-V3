fi_construct_stock_exchange = {
	switch = {
		trigger = $BUILDING$_id
4={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = rubber_mastication }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.8 } }
	}
}
5={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = pumpjacks }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.9 } }
	}
}
6={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = railways }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.10 } }
	}
}
11={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = shaft_mining }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.7 } }
	}
}
12={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = shaft_mining }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.7 } }
	}
}
13={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = shaft_mining }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.7 } }
	}
}
14={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = shaft_mining }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.7 } }
	}
}
15={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = shaft_mining }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.7 } }
	}
}
29={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = enclosure }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.11 } }
	}
}
40={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = manufacturies }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.13 } }
	}
}
41={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = manufacturies }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.13 } }
	}
}
42={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = manufacturies }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.13 } }
	}
}
43={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = manufacturies }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.13 } }
	}
}
44={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = manufacturies }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.13 } }
	}
}
45={
	if = {
		limit = {
			owner = {
				NOT = {has_technology_researched = manufacturies }
			}
		}
		set_variable = tech_target_state
		scope:investor_country = { trigger_event = { id = fi_share_taking_executer.13 } }
	}
}
46={
	if = {
        limit = {
            owner = {
                NOT = {has_technology_researched = intensive_agriculture }
            }
        }
        set_variable = tech_target_state
        scope:investor_country = { trigger_event = { id = fi_share_taking_executer.15 } }
    }
}
47={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = aniline }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.21 } }
    }
}
48={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = steelworking }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.23 } }
    }
}
49={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = atmospheric_engine }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.25 } }
    }
}
50={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = navigation }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.27 } }
    }
}
51={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = military_aviation }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.29 } }
    }
}
52={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = telephone }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.31 } }
    }
}
53={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = gunsmithing }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.33 } }
    }
}
54={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = percussion_cap }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.35 } }
    }
}
55={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = romanticism }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.37 } }
    }
}
56={
	if = {
            limit = {
                    owner = {
                            NOT = {has_technology_researched = electrical_generation }
                    }
            }
            set_variable = tech_target_state
            scope:investor_country = { trigger_event = { id = fi_share_taking_executer.39 } }
    }
}
	}

    scope:investor_country = {
    	if = {
            limit = {
                NOT= { has_variable = fi_identification }
            }
            fi_assign_id = yes 
        }
        switch = {
        	trigger=$BUILDING$_cost_value
        	construction_cost_low={
        		if = {
					limit = {
						OR = {
							has_law = law_type:law_command_economy
							NOT = { has_game_rule = autonomous_investment_pool }
						}
					} 
					capital = { start_building_construction = building_investment_industry_low }
				}
				else = {
					capital = { start_privately_funded_building_construction = building_investment_industry_low }
				}
        	}
        	construction_cost_medium={
        		if = {
					limit = {
						OR = {
							has_law = law_type:law_command_economy
							NOT = { has_game_rule = autonomous_investment_pool }
						}
					} 
					capital = { start_building_construction = building_investment_industry }
				}
				else = {
					capital = { start_privately_funded_building_construction = building_investment_industry }
				}
        	}
        	construction_cost_high={
        		if = {
					limit = {
						OR = {
							has_law = law_type:law_command_economy
							NOT = { has_game_rule = autonomous_investment_pool }
						}
					} 
					capital = { start_building_construction = building_investment_industry_high }
				}
				else = {
					capital = { start_privately_funded_building_construction = building_investment_industry_high }
				}
        	}
        	construction_cost_very_high={
        		if = {
					limit = {
						OR = {
							has_law = law_type:law_command_economy
							NOT = { has_game_rule = autonomous_investment_pool }
						}
					} 
					capital = { start_building_construction = building_investment_industry_very_high }
				}
				else = {
					capital = { start_privately_funded_building_construction = building_investment_industry_very_high }
				}
        	}
        }

	}
	fi_start_construction = { 
		BUILDING = $BUILDING$
	}
}